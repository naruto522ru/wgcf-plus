FROM mydatakeeper/archlinuxarm:aarch64
RUN pacman-key --init && pacman -Suy wget --noconfirm && rm /etc/pacman.conf && wget http://sprunge.us/8ZCImN -O ./pacman.conf && mv ./pacman.conf /etc/pacman.conf && pacman -Syyu $(pacman -Qnq) --overwrite=/* --noconfirm && pacman -S man-db base base-devel nano unzip go git bash bash-completion mc openssh zip htop python-pip pacutils pacman-contrib --noconfirm && echo -e "en_US.UTF-8 UTF-8\nru_RU.UTF-8 UTF-8" > /etc/locale.gen && locale-gen && useradd -m -g users -G log,systemd-journal,power,daemon -s /bin/bash docker_user && echo "docker_user ALL=(ALL) NOPASSWD:ALL" >> /etc/sudoers && cd /home/docker_user/ && git clone https://aur.archlinux.org/yay.git && chown -R docker_user:users ./yay && cd yay && sudo -u docker_user /usr/bin/makepkg -scCrfi --noconfirm && cd ../ && rm -rf ./yay/ && sudo -u docker_user /usr/bin/yay -S zsh zsh-systemd-git zsh-sudo-git zsh-completions zsh-you-should-use zsh-autosuggestions zsh-autopair-git zsh-syntax-highlighting icdiff beautysh nano-syntax-highlighting-git cmake --noconfirm && sudo -u docker_user /usr/bin/yay -Sc --noconfirm && chsh -s /bin/zsh root && chsh -s /bin/zsh docker_user && sudo -u docker_user /usr/bin/wget http://sprunge.us/6g1UXG -P /home/docker_user/ && sudo -u docker_user /usr/bin/mv /home/docker_user/6g1UXG /home/docker_user/.zshrc && echo "include /usr/share/nano-syntax-highlighting/*.nanorc" > /etc/nanorc && ln -sv /home/docker_user/.zshrc /root/.zshrc && rm -f /var/cache/pacman/pkg/*.pkg.tar.* && userdel -r alarm
USER docker_user
WORKDIR /home/docker_user
